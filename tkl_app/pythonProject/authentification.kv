#:import dp kivy.metrics.dp
#:import sp kivy.metrics.sp

<AuthentificationPage>:
    MDScreenManager:
        id:screen_manager
        FirstTime:
            name:"firstpage"
            manager:screen_manager
        Inscription:
            name:"inscription"
            manager:screen_manager
        Connexion:
            name:"connexion"
            manager:screen_manager


<FirstTime>:
    MDFloatLayout:
        md_bg_color:"red"
        FitImage:
            source:'img/Rectangle 82.jpg'
            pos_hint:{"top":1 ,"x":0}
            size_hint:(1,.5)
            canvas.after:
                Color:
                    rgba:[65/255,64/255,65/255,0.5]
                Rectangle:
                    size:self.size
                    pos:self.pos


        MDBoxLayout:
            orientation:"vertical"
            pos_hint:{"y":0}
            size_hint:(1,.6)
            spacing:dp(40)
            padding:0
            halign:"center"
            canvas.before:
                Color:
                    rgb:[1,1,1]
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[dp(50),dp(50),0,0]
            Image:
                source:"img/logo.png"
                size_hint_x:.3
                keep_ratio:True
                allow_stretch:True
                pos_hint:{"center_x":0.5}
            MDBoxLayout:
                orientation:"vertical"
                adaptive_height:True
                spacing:dp(40)
                padding:dp(10)
                MDBoxLayout:
                    orientation:"vertical"
                    spacing:dp(18)
                    adaptive_height:True
                    padding:dp(10)
                    MDLabel:
                        text:"Prêt à savourer ?"
                        adaptive_height:True
                        font_size:sp(32)
                        bold:True
                        halign:"center"
                    MDLabel:
                        text:"Inscrivez vous ou connecter vous pour découvrir vos restaurant favoris"
                        adaptive_height:True
                        font_size:sp(18)
                        halign:"center"
                MDBoxLayout:
                    orientation:"vertical"
                    spacing:dp(20)
                    adaptive_height:True
                    padding:dp(10)
                    MDRectangleFlatButton:
                        text:"inscription"
                        font_style:"Button"
                        md_bg_color:"#A90404"
                        size_hint_x:1
                        line_color:(0,0,0,0)
                        text_color:"#ffffff"
                        on_press:root.manager.current="inscription"
                    MDBoxLayout:
                        adaptive_size:True
                        padding:0
                        spacing:0
                        pos_hint:{"right":1}
                        MDLabel:
                            text:"j'ai déjà un compte,"
                            adaptive_width:True
                            font_size:sp(18)
                        MDTextButton:
                            text:"se connecter"
                            adaptive_width:True
                            font_size:18
                            bold:True
                            color:"#A90404"
                            on_press:root.manager.current="connexion"



<Inscription>:
    ScrollView:
        MDBoxLayout:
            orientation:"vertical"
            padding_y:[0,0]
            adaptive_height:True
            padding_x:dp(15)
            spacing:dp(30)
            Image:
                source:"img/logo.png"
                size_hint_x:None
                size_hint_y:None
                keep_ratio:True
                allow_stretch:True
                pos_hint:{"center_x":0.5}
            MDBoxLayout:
                orientation:"vertical"
                spacing:0
                adaptive_height:True
                MDTextField:
                    id:nomInput
                    hint_text:"Nom d'utilisateur"
                    size_hint_x:.9
                    height:self.minimum_height
                    pos_hint:{"center_x":0.5}
                    adaptive_height:True
                    multiline:False
                MDTextField:
                    id:telInput
                    hint_text:"Numéro de telephone"
                    size_hint_x:.9
                    validator: "phone"
                    height:self.minimum_height
                    pos_hint:{"center_x":0.5}
                    adaptive_height:True
                    multiline:False

                MDTextField:
                    id:emailInput
                    hint_text:"Email"
                    validator: "email"
                    helper_text:"Entrer un email au format xyz@gmail.com"
                    helper_text_mode:"on_error"
                    size_hint_x:.9
                    height:self.minimum_height
                    pos_hint:{"center_x":0.5}
                    adaptive_height:True
                    multiline:False
                MDTextField:
                    id:passwordInput
                    hint_text:"Mot de passe"
                    size_hint_x:.9
                    height:self.minimum_height
                    pos_hint:{"center_x":0.5}
                    helper_text:"le mot de passe doit posséder au moins 8 caractères"
                    helper_text_mode:"on_error"
                    adaptive_height:True
                    multiline:False
                    password:"True"

                MDTextField:
                    id:passwordConfirm
                    hint_text:"confimer le mot de passe"
                    size_hint_x:.9
                    height:self.minimum_height
                    helper_text:"reécrire le même code"
                    helper_text_mode:"on_error"
                    pos_hint:{"center_x":0.5}
                    adaptive_height:True
                    multiline:False
                    password:"True"
            MDBoxLayout:
                orientation:"vertical"
                spacing:0
                adaptive_height:True
                MDIconButton:
                    icon:"eye-off"
                    pos_hint:{"center_x":0.5}
                    on_release:
                        self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                        passwordInput.password = False if self.icon == "eye" else True

                MDBoxLayout:
                    orientation:"vertical"
                    spacing:dp(20)
                    adaptive_height:True
                    padding:dp(10)
                    MDRectangleFlatButton:
                        text:"inscription"
                        font_style:"Button"
                        md_bg_color:"#A90404"
                        size_hint_x:1
                        line_color:(0,0,0,0)
                        text_color:"#ffffff"
                        on_press:root.sign_in(nom=nomInput,tel=telInput,email=emailInput,password=passwordInput,confirm=passwordConfirm)
                    MDBoxLayout:
                        adaptive_size:True
                        padding:0
                        spacing:0
                        pos_hint:{"right":1}
                        MDLabel:
                            text:"j'ai déjà un compte,"
                            adaptive_width:True
                            font_size:sp(18)
                        MDTextButton:
                            text:"se connecter"
                            adaptive_width:True
                            font_size:sp(18)
                            bold:True
                            color:"#A90404"
                            on_press:root.manager.current="connexion"

<Connexion>:
    MDBoxLayout:
        orientation:"vertical"
        padding_y:[0,0]
        adaptive_height:True
        pos_hint:{"top":1}
        padding_x:dp(15)
        spacing:dp(30)
        Image:
            source:"img/logo.png"
            size_hint_x:None
            size_hint_y:None
            keep_ratio:True
            allow_stretch:True
            pos_hint:{"center_x":0.5}
        MDBoxLayout:
            orientation:"vertical"
            spacing:0
            adaptive_height:True
            MDTextField:
                id:emailInput
                hint_text:"Email"
                size_hint_x:.9
                validator: "email"
                helper_text:"Entrer un email au format xyz@gmail.com"
                helper_text_mode:"on_error"
                height:self.minimum_height
                pos_hint:{"center_x":0.5}
                adaptive_height:True
                multiline:False
            MDTextField:
                id:passwordInput
                hint_text:"Mot de passe"
                size_hint_x:.9
                height:self.minimum_height
                pos_hint:{"center_x":0.5}
                adaptive_height:True
                multiline:False
                password:"True"


        MDBoxLayout:
            orientation:"vertical"
            spacing:0
            adaptive_height:True
            MDIconButton:
                icon:"eye-off"
                pos_hint:{"center_x":0.5}
                on_release:
                    self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                    passwordInput.password = False if self.icon == "eye" else True
            MDBoxLayout:
                orientation:"vertical"
                spacing:dp(20)
                adaptive_height:True
                padding:dp(10)
                MDRectangleFlatButton:
                    text:"connexion"
                    font_style:"Button"
                    md_bg_color:"#A90404"
                    size_hint_x:1
                    line_color:(0,0,0,0)
                    text_color:"#ffffff"
                    on_press:root.login(emailInput,passwordInput)
                MDBoxLayout:
                    adaptive_size:True
                    padding:0
                    spacing:0
                    pos_hint:{"right":1}
                    MDLabel:
                        text:"je n'ai pas de compte,"
                        adaptive_width:True
                        font_size:sp(18)
                    MDTextButton:
                        text:"s'inscrire"
                        adaptive_width:True
                        font_size:sp(18)
                        bold:True
                        color:"#A90404"
                        on_press:root.manager.current="inscription"

